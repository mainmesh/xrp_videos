{% extends "base.html" %}
{% block title %}Tiers & Pricing{% endblock %}
{% block content %}
  <h2 class="text-4xl font-bold text-center gradient-text mb-4">Tier System & Pricing</h2>
  
  {% if user.is_authenticated %}
    <div class="text-center mb-8">
      <p class="text-gray-300">Your Balance: <span class="text-2xl font-bold text-green-400">${{ user_balance|floatformat:2 }}</span></p>
      {% if user_tier %}
        <p class="text-sm text-gray-400">Current Tier: <span class="font-bold text-purple-400">{{ user_tier.name }}</span></p>
      {% else %}
        <p class="text-sm text-gray-400">Current Tier: <span class="font-bold text-orange-400">Bronze (Free)</span></p>
      {% endif %}
    </div>
  {% endif %}
  
  <div class="grid md:grid-cols-3 gap-8 mb-16">
    <!-- Bronze/Free Tier -->
    <div class="dark-glass rounded-2xl p-8 border-2 border-orange-400 hover:shadow-2xl hover:shadow-orange-400/50 transition bg-gradient-to-br from-orange-500/10 to-yellow-500/10">
      <h3 class="text-2xl font-bold text-orange-300 mb-2">Bronze</h3>
      <p class="text-3xl font-bold text-orange-400 mb-2">Free</p>
      <p class="text-gray-200 mb-6">No deposit required</p>
      
      <ul class="space-y-3 text-gray-300 mb-8">
        <li class="flex items-start gap-3">
          <span class="text-green-400 mt-1">âœ“</span>
          <span>Access to Bronze videos</span>
        </li>
        <li class="flex items-start gap-3">
          <span class="text-green-400 mt-1">âœ“</span>
          <span>Earn <strong>$0.50</strong> per video</span>
        </li>
        <li class="flex items-start gap-3">
          <span class="text-green-400 mt-1">âœ“</span>
          <span>Referral bonuses (10% commission)</span>
        </li>
        <li class="flex items-start gap-3">
          <span class="text-green-400 mt-1">âœ“</span>
          <span>Instant wallet payouts</span>
        </li>
      </ul>
      
      {% if user.is_authenticated %}
        <a href="{% url 'videos:list' %}" class="w-full block text-center px-4 py-3 bg-gradient-to-r from-yellow-600 to-amber-600 hover:from-yellow-500 hover:to-amber-500 text-white font-bold rounded-lg transition">
          Watch Videos
        </a>
      {% else %}
        <a href="{% url 'accounts:register' %}" class="w-full block text-center px-4 py-3 bg-gradient-to-r from-yellow-600 to-amber-600 hover:from-yellow-500 hover:to-amber-500 text-white font-bold rounded-lg transition">
          Get Started
        </a>
      {% endif %}
    </div>

    <!-- Silver Tier -->
    <div class="dark-glass rounded-2xl p-8 border-2 border-blue-400 hover:shadow-2xl hover:shadow-blue-400/50 transition relative bg-gradient-to-br from-blue-500/10 to-cyan-500/10">
      <div class="absolute -top-4 left-1/2 -translate-x-1/2 px-4 py-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xs font-bold rounded-full">
        POPULAR
      </div>
      <h3 class="text-2xl font-bold text-blue-300 mb-2">Silver</h3>
      <p class="text-3xl font-bold text-blue-400 mb-2">$50</p>
      <p class="text-gray-200 mb-6">One-time upgrade</p>
      
      <ul class="space-y-3 text-gray-300 mb-8">
        <li class="flex items-start gap-3">
          <span class="text-green-400 mt-1">âœ“</span>
          <span>All Bronze features</span>
        </li>
        <li class="flex items-start gap-3">
          <span class="text-green-400 mt-1">âœ“</span>
          <span>Access to Silver videos</span>
        </li>
        <li class="flex items-start gap-3">
          <span class="text-green-400 mt-1">âœ“</span>
          <span>Earn <strong>$1.00</strong> per video</span>
        </li>
        <li class="flex items-start gap-3">
          <span class="text-green-400 mt-1">âœ“</span>
          <span>Priority access to new content</span>
        </li>
      </ul>
      
      {% if user.is_authenticated %}
        {% if user_tier and user_tier.price >= 50 %}
          <button disabled class="w-full block text-center px-4 py-3 bg-gray-600 text-gray-300 font-bold rounded-lg cursor-not-allowed">
            {% if user_tier.price == 50 %}Current Tier{% else %}Tier Unlocked{% endif %}
          </button>
        {% else %}
          {% for tier in tiers_list %}
            {% if tier.price == 50 %}
              <a href="{% url 'accounts:upgrade_tier' tier.id %}" class="w-full block text-center px-4 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 text-white font-bold rounded-lg transition shadow-lg mb-2">
                ðŸ’° Upgrade with Balance
              </a>
              <a href="{% url 'accounts:deposit' %}?tier=silver&amount=50" class="w-full block text-center px-4 py-2 bg-purple-600/50 hover:bg-purple-600 text-white text-sm rounded-lg transition">
                Or Add Funds First
              </a>
            {% endif %}
          {% endfor %}
        {% endif %}
      {% else %}
        <a href="{% url 'accounts:register' %}" class="w-full block text-center px-4 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 text-white font-bold rounded-lg transition shadow-lg">
          Sign Up to Upgrade
        </a>
      {% endif %}
    </div>

    <!-- Gold Tier -->
    <div class="dark-glass rounded-2xl p-8 border-2 border-yellow-400 hover:shadow-2xl hover:shadow-yellow-400/50 transition bg-gradient-to-br from-yellow-500/10 to-amber-500/10">
      <h3 class="text-2xl font-bold text-yellow-300 mb-2">Gold</h3>
      <p class="text-3xl font-bold text-yellow-400 mb-2">$100</p>
      <p class="text-gray-200 mb-6">One-time upgrade</p>
      
      <ul class="space-y-3 text-gray-300 mb-8">
        <li class="flex items-start gap-3">
          <span class="text-green-400 mt-1">âœ“</span>
          <span>All Silver features</span>
        </li>
        <li class="flex items-start gap-3">
          <span class="text-green-400 mt-1">âœ“</span>
          <span>Full access to Gold videos</span>
        </li>
        <li class="flex items-start gap-3">
          <span class="text-green-400 mt-1">âœ“</span>
          <span>Premium earning: <strong>$2.00</strong> per video</span>
        </li>
        <li class="flex items-start gap-3">
          <span class="text-green-400 mt-1">âœ“</span>
          <span>VIP customer support</span>
        </li>
      </ul>
      
      {% if user.is_authenticated %}
        {% if user_tier and user_tier.price >= 100 %}
          <button disabled class="w-full block text-center px-4 py-3 bg-gray-600 text-gray-300 font-bold rounded-lg cursor-not-allowed">
            Current Tier
          </button>
        {% else %}
          {% for tier in tiers_list %}
            {% if tier.price == 100 %}
              <a href="{% url 'accounts:upgrade_tier' tier.id %}" class="w-full block text-center px-4 py-3 bg-gradient-to-r from-yellow-600 to-amber-600 hover:from-yellow-500 hover:to-amber-500 text-white font-bold rounded-lg transition shadow-lg mb-2">
                ðŸ’° Upgrade with Balance
              </a>
              <a href="{% url 'accounts:deposit' %}?tier=gold&amount=100" class="w-full block text-center px-4 py-2 bg-purple-600/50 hover:bg-purple-600 text-white text-sm rounded-lg transition">
                Or Add Funds First
              </a>
            {% endif %}
          {% endfor %}
        {% endif %}
      {% else %}
        <a href="{% url 'accounts:register' %}" class="w-full block text-center px-4 py-3 bg-gradient-to-r from-yellow-600 to-amber-600 hover:from-yellow-500 hover:to-amber-500 text-white font-bold rounded-lg transition shadow-lg">
          Sign Up to Upgrade
        </a>
      {% endif %}
    </div>
  </div>

  <!-- FAQ Section -->
  <section class="dark-glass rounded-2xl p-8 border border-purple-500/30">
    <h3 class="text-2xl font-bold gradient-text mb-6">Tier FAQs</h3>
    <div class="grid md:grid-cols-2 gap-6">
      <div>
        <h4 class="font-bold text-white mb-2">Can I upgrade later?</h4>
        <p class="text-gray-300">Yes! You can upgrade from Bronze to Silver or Gold anytime by making a deposit.</p>
      </div>
      <div>
        <h4 class="font-bold text-white mb-2">Is my deposit refundable?</h4>
        <p class="text-gray-300">Your deposit stays in your wallet and counts toward your balance for withdrawals.</p>
      </div>
      <div>
        <h4 class="font-bold text-white mb-2">How often are videos added?</h4>
        <p class="text-gray-300">We add new premium content regularly. Check back daily for fresh earning opportunities!</p>
      </div>
      <div>
        <h4 class="font-bold text-white mb-2">Any hidden fees?</h4>
        <p class="text-gray-300">Nope! No hidden fees. Your earnings are yours to keep and withdraw anytime.</p>
      </div>
    </div>
  </section>

{% endblock %}
