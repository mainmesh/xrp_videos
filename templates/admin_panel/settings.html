{% extends "admin_panel/base.html" %}
{% block title %}Settings{% endblock %}
{% block page_title %}Admin Settings{% endblock %}

{% block content %}
<!-- Site Maintenance -->
<div class="bg-white rounded-xl shadow-sm p-8 border border-gray-200 mb-6">
    <h3 class="text-xl font-bold text-gray-800 mb-6">Site Maintenance</h3>
    <form method="post" action="{% url 'admin_panel:settings' %}" class="space-y-6">
        {% csrf_token %}
        <div class="flex items-center justify-between p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
            <div class="flex-1">
                <h4 class="text-lg font-semibold text-gray-800 mb-1">Maintenance Mode</h4>
                <p class="text-sm text-gray-600">When enabled, only admins can access the site. Regular users will see a maintenance page.</p>
            </div>
            <label class="relative inline-flex items-center cursor-pointer ml-6">
                <input type="checkbox" name="maintenance_mode" class="sr-only peer" {% if site_settings.maintenance_mode %}checked{% endif %} onchange="this.form.submit()">
                <div class="w-14 h-7 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-purple-600"></div>
            </label>
        </div>
        
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Maintenance Message</label>
            <textarea name="maintenance_message" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">{{ site_settings.maintenance_message }}</textarea>
            <p class="mt-1 text-xs text-gray-500">This message will be displayed to users during maintenance</p>
        </div>
        
        <button type="submit" class="px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold rounded-lg transition">
            Save Maintenance Settings
        </button>
    </form>
</div>

<!-- Platform Settings -->
<div class="bg-white rounded-xl shadow-sm p-8 border border-gray-200">
    <h3 class="text-xl font-bold text-gray-800 mb-6">Platform Settings</h3>
    <form method="post" action="{% url 'admin_panel:settings' %}" class="space-y-6">
        {% csrf_token %}
        <input type="hidden" name="settings_type" value="platform">
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Site Name</label>
                <input type="text" name="site_name" value="{{ site_settings.site_name }}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Contact Email</label>
                <input type="email" name="contact_email" value="{{ site_settings.contact_email }}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Minimum Withdrawal Amount ($)</label>
                <input type="number" name="min_withdrawal_amount" value="{{ site_settings.min_withdrawal_amount }}" step="0.01" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                <p class="mt-1 text-xs text-gray-500">Users must have at least this amount to withdraw</p>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Min Referrals for Withdrawal</label>
                <input type="number" name="min_referrals_for_withdrawal" value="{{ site_settings.min_referrals_for_withdrawal }}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                <p class="mt-1 text-xs text-gray-500">Required referrals before users can withdraw</p>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Withdrawal Fee (%)</label>
                <input type="number" name="withdrawal_fee_percentage" value="{{ site_settings.withdrawal_fee_percentage }}" step="0.01" min="0" max="100" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                <p class="mt-1 text-xs text-gray-500">Fee charged on withdrawals (0-100%)</p>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Referral Commission (%)</label>
                <input type="number" name="referral_bonus_percentage" value="{{ site_settings.referral_bonus_percentage }}" step="0.01" min="0" max="100" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                <p class="mt-1 text-xs text-gray-500">Percentage referrer earns from referee's earnings</p>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Default Video Reward ($)</label>
                <input type="number" name="default_video_reward" value="{{ site_settings.default_video_reward }}" step="0.01" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                <p class="mt-1 text-xs text-gray-500">Default reward amount for watching videos</p>
            </div>
        </div>
        
        <button type="submit" class="px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold rounded-lg transition">
            Save Platform Settings
        </button>
    </form>
</div>
{% endblock %}
